{"remainingRequest":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\src\\views\\Conversation.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\src\\views\\Conversation.vue","mtime":1648647127977},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\babel.config.js","mtime":1645695165000},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648453903687},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1648453910578},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648453903687},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1648453912712}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHBvc3Rlck1lc3NhZ2UgZnJvbSAiLi4vY29tcG9uZW50cy9wb3N0ZXJNZXNzYWdlLnZ1ZSI7CmltcG9ydCBNZXNzYWdlIGZyb20gIi4uL2NvbXBvbmVudHMvTWVzc2FnZS52dWUiOwppbXBvcnQgeyBsYXRMbmcgfSBmcm9tICJsZWFmbGV0IjsKaW1wb3J0IHsgTE1hcCwgTFRpbGVMYXllciwgTE1hcmtlciwgTFBvcHVwLCBMVG9vbHRpcCB9IGZyb20gInZ1ZTItbGVhZmxldCI7CmltcG9ydCB7IEljb24gfSBmcm9tICJsZWFmbGV0IjsKaW1wb3J0ICJsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgcG9zdGVyTWVzc2FnZTogcG9zdGVyTWVzc2FnZSwKICAgIE1lc3NhZ2U6IE1lc3NhZ2UsCiAgICBMTWFwOiBMTWFwLAogICAgTFRpbGVMYXllcjogTFRpbGVMYXllciwKICAgIExNYXJrZXI6IExNYXJrZXIsCiAgICBMUG9wdXA6IExQb3B1cCwKICAgIExUb29sdGlwOiBMVG9vbHRpcAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnZlcnNhdGlvbjogZmFsc2UsCiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgbWVtYmVyczogdGhpcy4kc3RvcmUuc3RhdGUubWVtYmVycwogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgIHRoaXMuJGFwaS5nZXQoImNoYW5uZWxzLyIuY29uY2F0KGlkKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgX3RoaXMuY29udmVyc2F0aW9uID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgIF90aGlzLmNoYXJnZXJNZXNzYWdlKCk7CiAgICB9KTsKICAgIHRoaXMuJGJ1cy4kb24oIm5ld01lc3NhZ2UiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICBfdGhpcy5jaGFyZ2VyTWVzc2FnZSgpOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFyZ2VyTWVzc2FnZTogZnVuY3Rpb24gY2hhcmdlck1lc3NhZ2UoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy4kYXBpLmdldCgiY2hhbm5lbHMvIi5jb25jYXQodGhpcy5jb252ZXJzYXRpb24uaWQsICIvcG9zdHMiKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczIubWVzc2FnZXMgPSByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVDb252ZXJzYXRpb246IGZ1bmN0aW9uIGRlbGV0ZUNvbnZlcnNhdGlvbigpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAoY29uZmlybSgiw6p0ZXMtdm91cyBzw7tyZSBkZSB2b3Vsb2lyIHN1cHByaW1lciBsJ8OpdsOobmVtZW50JyA/IikpIHsKICAgICAgICB0aGlzLiRhcGlbImRlbGV0ZSJdKCJjaGFubmVscy8iLmNvbmNhdCh0aGlzLmNvbnZlcnNhdGlvbi5pZCkpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgIH0pWyJjYXRjaCJdKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICAgICAgICBhbGVydChlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Conversation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA,OAAA,aAAA,MAAA,iCAAA;AACA,OAAA,OAAA,MAAA,2BAAA;AACA,SAAA,MAAA,QAAA,SAAA;AACA,SAAA,IAAA,EAAA,UAAA,EAAA,OAAA,EAAA,MAAA,EAAA,QAAA,QAAA,cAAA;AACA,SAAA,IAAA,QAAA,SAAA;AACA,OAAA,0BAAA;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,aAAA,EAAA,aADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,IAAA,EAAA,IAHA;AAIA,IAAA,UAAA,EAAA,UAJA;AAKA,IAAA,OAAA,EAAA,OALA;AAMA,IAAA,MAAA,EAAA,MANA;AAOA,IAAA,QAAA,EAAA;AAPA,GADA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA;AAHA,KAAA;AAKA,GAhBA;AAiBA,EAAA,OAjBA,qBAiBA;AAAA;;AACA,QAAA,EAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;AACA,SAAA,IAAA,CAAA,GAAA,oBAAA,EAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,YAAA,GAAA,QAAA,CAAA,IAAA;;AACA,MAAA,KAAA,CAAA,cAAA;AACA,KAHA;AAIA,SAAA,IAAA,CAAA,GAAA,CAAA,YAAA,EAAA,UAAA,IAAA,EAAA;AACA,MAAA,KAAA,CAAA,cAAA;AACA,KAFA;AAGA,GA1BA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,4BACA;AAAA;;AACA,WAAA,IAAA,CACA,GADA,oBACA,KAAA,YAAA,CAAA,EADA,aAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA;AACA,OAJA;AAKA,KAPA;AAQA,IAAA,kBARA,gCAQA;AAAA;;AACA,UAAA,OAAA,CAAA,oDAAA,CAAA,EAAA;AACA,aAAA,IAAA,8BACA,KAAA,YAAA,CAAA,EADA,GAEA,IAFA,CAEA,YAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,SAJA,WAKA,UAAA,KAAA,EAAA;AACA,cAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AACA,YAAA,KAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA,CAAA;AACA;AACA,SATA;AAUA;AACA;AArBA;AA3BA,CAAA","sourcesContent":["<template>\n  <div>\n    <Header />\n    <section class=\"section\">\n      <h4 class=\"title is-4 has-text-centered\">Détail de l'évènement</h4>\n      \n      <l-map\n        v-if=\"showMap\"\n        :zoom=\"zoom\"\n        :center=\"initialLocation\"\n        :options=\"mapOptions\"\n        style=\"height: 350px; width: 100%\"\n        @update:center=\"centerUpdate\"\n        @update:zoom=\"zoomUpdate\"\n        @click=\"handleMapClick\"\n      >\n        <l-tile-layer :url=\"url\" :attribution=\"attribution\" />\n        <l-marker :key=\"index\" v-for=\"(m, index) in markers\" :lat-lng=\"m.pos\">\n          <l-tooltip :options=\"{ permanent: true, interactive: true }\">{{\n            location\n          }}</l-tooltip>\n        </l-marker>\n      </l-map>\n      <div class=\"media box\" v-if=\"conversation\">\n        <div class=\"media-content\">\n          <div class=\"content\">\n            <p class=\"title is-4\">\n              {{ conversation.topic }}\n              <span class=\"tag\"> {{ messages.length }} message(s)</span>\n            </p>\n            <p class=\"subtitle is-6 tag is-rounded is-warning\">\n              {{ conversation.label }}\n            </p>\n            <br />\n          </div>\n        </div>\n        <div class=\"media-right\">\n          <router-link\n            div=\"box\"\n            :to=\"{ name: 'EditConversation', params: { id: conversation.id } }\"\n            class=\"button is-success is-small\"\n            >Modifier</router-link\n          >\n          <button\n            @click=\"deleteConversation\"\n            class=\"button button is-danger is-small\"\n          >\n            Supprimer\n          </button>\n        </div>\n      </div>\n      <posterMessage :conversation=\"conversation\" />\n      <h4 class=\"title is-4\">Conversations</h4>\n      <template v-for=\"message in messages\">\n        <message :message=\"message\" :key=\"message.id\" />\n      </template>\n    </section>\n  </div>\n</template>\n<script>\nimport posterMessage from \"../components/posterMessage.vue\";\nimport Message from \"../components/Message.vue\";\nimport { latLng } from \"leaflet\";\nimport { LMap, LTileLayer, LMarker, LPopup, LTooltip } from \"vue2-leaflet\";\nimport { Icon } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nexport default {\n  components: {\n    posterMessage,\n    Message,\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup,\n    LTooltip,\n  },\n  data() {\n    return {\n      conversation: false,\n      messages: [],\n      members: this.$store.state.members,\n    };\n  },\n  mounted() {\n    let id = this.$route.params.id;\n    this.$api.get(`channels/${id}`).then((response) => {\n      this.conversation = response.data;\n      this.chargerMessage();\n    });\n    this.$bus.$on(\"newMessage\", (data) => {\n      this.chargerMessage();\n    });\n  },\n  methods: {\n    chargerMessage() {\n      this.$api\n        .get(`channels/${this.conversation.id}/posts`)\n        .then((response) => {\n          this.messages = response.data;\n        });\n    },\n    deleteConversation() {\n      if (confirm(\"êtes-vous sûre de vouloir supprimer l'évènement' ?\")) {\n        this.$api\n          .delete(`channels/${this.conversation.id}`)\n          .then(() => {\n            this.$router.push(\"/\");\n          })\n          .catch((error) => {\n            if (error.response.data.message) {\n              alert(error.response.data.message);\n            }\n          });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../scss/bulma.scss\";\n</style>\n"],"sourceRoot":"src/views"}]}