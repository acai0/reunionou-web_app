{"remainingRequest":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\src\\views\\Event.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\src\\views\\Event.vue","mtime":1648754549413},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648453903687},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1648453910578},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1648453903687},{"path":"C:\\reunionou-backoffice-main (1)\\reunionou-backoffice-main\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1648453912712}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwb3N0ZXJNZXNzYWdlIGZyb20gIi4uL2NvbXBvbmVudHMvcG9zdGVyTWVzc2FnZS52dWUiOwppbXBvcnQgTWVzc2FnZSBmcm9tICIuLi9jb21wb25lbnRzL01lc3NhZ2UudnVlIjsKaW1wb3J0IHsgbGF0TG5nIH0gZnJvbSAibGVhZmxldCI7CmltcG9ydCB7IExNYXAsIExUaWxlTGF5ZXIsIExNYXJrZXIsIExQb3B1cCwgTFRvb2x0aXAgfSBmcm9tICJ2dWUyLWxlYWZsZXQiOwppbXBvcnQgeyBJY29uIH0gZnJvbSAibGVhZmxldCI7CmltcG9ydCAibGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBwb3N0ZXJNZXNzYWdlLAogICAgTWVzc2FnZSwKICAgIExNYXAsCiAgICBMVGlsZUxheWVyLAogICAgTE1hcmtlciwKICAgIExQb3B1cCwKICAgIExUb29sdGlwLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbnZlcnNhdGlvbjogZmFsc2UsCiAgICAgIG1lc3NhZ2VzOiBbXSwKICAgICAgbWVtYmVyczogdGhpcy4kc3RvcmUuc3RhdGUubWVtYmVycywKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgdGhpcy4kYXBpLmdldChgZXZlbnQvJHtpZH1gKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICB0aGlzLmNvbnZlcnNhdGlvbiA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIHRoaXMuY2hhcmdlck1lc3NhZ2UoKTsKICAgIH0pOwogICAgdGhpcy4kYnVzLiRvbigibmV3TWVzc2FnZSIsIChkYXRhKSA9PiB7CiAgICAgIHRoaXMuY2hhcmdlck1lc3NhCiAgICAgIGdlKCk7CiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNoYXJnZXJNZXNzYWdlKCkgewogICAgICB0aGlzLiRhcGkKICAgICAgICAuZ2V0KGBldmVudC8ke3RoaXMuY29udmVyc2F0aW9uLmlkfS9wb3N0c2ApCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgICB0aGlzLm1lc3NhZ2VzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVDb252ZXJzYXRpb24oKSB7CiAgICAgIGlmIChjb25maXJtKCLDqnRlcy12b3VzIHPDu3JlIGRlIHZvdWxvaXIgc3VwcHJpbWVyIGwnw6l2w6huZW1lbnQnID8iKSkgewogICAgICAgIHRoaXMuJGFwaQogICAgICAgICAgLmRlbGV0ZShgY2hhbm5lbHMvJHt0aGlzLmNvbnZlcnNhdGlvbi5pZH1gKQogICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiLyIpOwogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICAgICAgICAgIGFsZXJ0KGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Event.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Event.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Header />\n    <section class=\"section\">\n      <h4 class=\"title is-4 has-text-centered\">Détail de l'évènement</h4>\n      \n      <l-map\n        v-if=\"showMap\"\n        :zoom=\"zoom\"\n        :center=\"initialLocation\"\n        :options=\"mapOptions\"\n        style=\"height: 350px; width: 100%\"\n        @update:center=\"centerUpdate\"\n        @update:zoom=\"zoomUpdate\"\n        @click=\"handleMapClick\"\n      >\n        <l-tile-layer :url=\"url\" :attribution=\"attribution\" />\n        <l-marker :key=\"index\" v-for=\"(m, index) in markers\" :lat-lng=\"m.pos\">\n          <l-tooltip :options=\"{ permanent: true, interactive: true }\">{{\n            location\n          }}</l-tooltip>\n        </l-marker>\n      </l-map>\n      <div class=\"media box\" v-if=\"event\">\n        <div class=\"media-content\">\n          <div class=\"content\">\n            <p class=\"title is-4\">\n              {{ event.topic }}\n              <span class=\"tag\"> {{ messages.length }} message(s)</span>\n            </p>\n            <p class=\"subtitle is-6 tag is-rounded is-warning\">\n              {{ event.label }}\n            </p>\n            <br />\n          </div>\n        </div>\n        <div class=\"media-right\">\n          <router-link\n            div=\"box\"\n            :to=\"{ name: 'EditEvent', params: { id: event.id } }\"\n            class=\"button is-success is-small\"\n            >Modifier</router-link\n          >\n          <button\n            @click=\"deleteEvent\"\n            class=\"button button is-danger is-small\"\n          >\n            Supprimer\n          </button>\n        </div>\n      </div>\n      <posterMessage :conversation=\"conversation\" />\n      <h4 class=\"title is-4\">Conversations</h4>\n      <template v-for=\"message in messages\">\n        <message :message=\"message\" :key=\"message.id\" />\n      </template>\n    </section>\n  </div>\n</template>\n<script>\nimport posterMessage from \"../components/posterMessage.vue\";\nimport Message from \"../components/Message.vue\";\nimport { latLng } from \"leaflet\";\nimport { LMap, LTileLayer, LMarker, LPopup, LTooltip } from \"vue2-leaflet\";\nimport { Icon } from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\nexport default {\n  components: {\n    posterMessage,\n    Message,\n    LMap,\n    LTileLayer,\n    LMarker,\n    LPopup,\n    LTooltip,\n  },\n  data() {\n    return {\n      conversation: false,\n      messages: [],\n      members: this.$store.state.members,\n    };\n  },\n  mounted() {\n    let id = this.$route.params.id;\n    this.$api.get(`event/${id}`).then((response) => {\n      this.conversation = response.data;\n      this.chargerMessage();\n    });\n    this.$bus.$on(\"newMessage\", (data) => {\n      this.chargerMessa\n      ge();\n    });\n  },\n  methods: {\n    chargerMessage() {\n      this.$api\n        .get(`event/${this.conversation.id}/posts`)\n        .then((response) => {\n          this.messages = response.data;\n        });\n    },\n    deleteConversation() {\n      if (confirm(\"êtes-vous sûre de vouloir supprimer l'évènement' ?\")) {\n        this.$api\n          .delete(`channels/${this.conversation.id}`)\n          .then(() => {\n            this.$router.push(\"/\");\n          })\n          .catch((error) => {\n            if (error.response.data.message) {\n              alert(error.response.data.message);\n            }\n          });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n@import \"../scss/bulma.scss\";\n</style>\n"]}]}